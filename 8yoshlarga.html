<!DOCTYPE html>
<html lang="uz">
<head>
<meta charset="UTF-8">
<title>8 yosh aralash test</title>
<style>
  body {
    font-family: Arial;
    background: #fffaf0;
    text-align: center;
    padding-top: 20px;
  }
  h1 { margin-bottom: 10px; }
  #question { font-size: 24px; margin: 20px; min-height: 80px; }
  .answer-btn {
    display: inline-block;
    font-size: 22px;
    padding: 15px 30px;
    margin: 10px;
    border-radius: 15px;
    text-decoration: none;
    background-color: #4CAF50;
    color: white;
    cursor: pointer;
  }
  .answer-btn:hover { background-color: #45a049; }
  #result { font-size: 22px; margin: 20px; color: green; min-height: 30px; }
</style>
</head>
<body>

<h1>üßÆ 8 yosh aralash test</h1>

<div id="question"></div>
<div id="answers"></div>
<h3 id="result"></h3>
<h3>‚≠ê Ball: <span id="score">0</span> / 30</h3>

<script>
// 30 ta takrorlanmas aralash savol
const questions = [];
const usedTexts = new Set();

while(questions.length<30){
  const typeRand = Math.random();
  let type, text, correct;

  if(typeRand<0.35){ // qo‚Äòshish
    type = "math_add";
    const a = Math.floor(Math.random()*30)+1;
    const b = Math.floor(Math.random()*20)+1;
    correct = a+b;
    text = `${a} + ${b} = ?`;
  } else if(typeRand<0.55){ // ayirish
    type = "math_sub";
    const a = Math.floor(Math.random()*50)+1;
    const b = Math.floor(Math.random()*20)+1;
    correct = a-b;
    text = `${a} - ${b} = ?`;
  } else if(typeRand<0.65){ // ko‚Äòpaytirish
    type = "math_mul";
    const a = Math.floor(Math.random()*10)+1;
    const b = Math.floor(Math.random()*5)+1;
    correct = a*b;
    text = `${a} √ó ${b} = ?`;
  } else if(typeRand<0.75){ // ketma-ketlik
    type = "sequence";
    const start = Math.floor(Math.random()*20)+1;
    correct = start+2;
    text = `${start}, ${start+1}, ?`;
  } else if(typeRand<0.85){ // taqqoslash
    type = "compare";
    const a = Math.floor(Math.random()*50)+1;
    const b = Math.floor(Math.random()*50)+1;
    correct = a>b ? a : b;
    text = `Qaysi raqam katta: ${a} yoki ${b}?`;
  } else { // oddiy bilim
    type = "knowledge";
    const items = [
      {q:"Qaysi hayvon uchadi?", a:"Qush", b:"It", c:"Sigir", correct:"Qush"},
      {q:"Qaysi meva qizil rangda?", a:"Olma", b:"Banan", c:"Olcha", correct:"Olma"},
      {q:"Qaysi meva sariq rangda?", a:"Limon", b:"Olma", c:"Olcha", correct:"Limon"},
      {q:"Qaysi hayvon suvda yashaydi?", a:"Baliq", b:"It", c:"Sigir", correct:"Baliq"},
      {q:"Qaysi ovqat shirin?", a:"Shirinlik", b:"Sabzi", c:"Bodring", correct:"Shirinlik"}
    ];
    const item = items[Math.floor(Math.random()*items.length)];
    text = item.q;
    correct = item.correct;
    type = "knowledge_item";
    questions.push({type, text, c:correct, options:[item.a,item.b,item.c]});
    continue;
  }

  if(!usedTexts.has(text)){
    usedTexts.add(text);
    questions.push({type, text, c: correct});
  }
}

// Ball va indeks
let score = 0;
let index = 0;

function getAnswers(correct){
  let answers = [correct];
  while(answers.length<3){
    let w = correct + Math.floor(Math.random()*7)-3;
    if(w<0) w=0;
    if(!answers.includes(w)) answers.push(w);
  }
  return answers.sort(()=>Math.random()-0.5);
}

function showQuestion(){
  if(index>=questions.length){
    document.body.innerHTML=`<h1>üéâ Tugadi!</h1><h2>Ball: ${score}/${questions.length}</h2>`;
    return;
  }

  const q = questions[index];
  const container = document.getElementById("question");
  const answerDiv = document.getElementById("answers");
  container.innerHTML = "";
  answerDiv.innerHTML = "";

  if(q.type==="knowledge_item"){
    container.innerText = q.text;
    q.options.forEach(opt=>{
      const btn = document.createElement("a");
      btn.href="#";
      btn.className="answer-btn";
      btn.innerText=opt;
      btn.onclick=()=>check(opt);
      answerDiv.appendChild(btn);
    });
  } else {
    container.innerText = q.text;
    const answersArr = getAnswers(q.c);
    answersArr.forEach(a=>{
      const btn = document.createElement("a");
      btn.href="#";
      btn.className="answer-btn";
      btn.innerText=a;
      btn.onclick=()=>check(a);
      answerDiv.appendChild(btn);
    });
  }
}

function check(a){
  const correct = questions[index].c;
  if(a===correct){
    score++;
    document.getElementById("result").innerText="üéâ To‚Äòg‚Äòri!";
  } else {
    document.getElementById("result").innerText=`‚ùå Xato, to‚Äòg‚Äòri javob: ${correct}`;
  }
  document.getElementById("score").innerText=score;
  index++;
  setTimeout(()=>{
    document.getElementById("result").innerText="";
    showQuestion();
  },800);
}

// Boshlash
showQuestion();
</script>
<a href="index.html">Ortga qaytish</a>
</body>
</html>

<!DOCTYPE html>
<html lang="uz">
<head>
<meta charset="UTF-8">
<title>6 yosh aralash vizual test</title>
<style>
  body {
    font-family: Arial;
    background: #f9f0ff;
    text-align: center;
    padding-top: 20px;
  }
  h1 { margin-bottom: 10px; }
  #question { font-size: 24px; margin: 20px; min-height: 80px; }
  .item {
    width: 50px;
    height: 50px;
    display: inline-block;
    margin: 5px;
  }
  .answer-btn {
    display: inline-block;
    font-size: 22px;
    padding: 15px 30px;
    margin: 10px;
    border-radius: 15px;
    text-decoration: none;
    background-color: #4CAF50;
    color: white;
    cursor: pointer;
  }
  .answer-btn:hover { background-color: #45a049; }
  #result { font-size: 22px; margin: 20px; color: green; min-height: 30px; }
</style>
</head>
<body>

<h1>üß∏ 6 yosh aralash test</h1>

<div id="question"></div>
<div id="answers"></div>
<h3 id="result"></h3>
<h3>‚≠ê Ball: <span id="score">0</span> / 30</h3>

<script>
// Rang va shakl variantlari
const colors = ["red","blue","green","yellow","orange","purple","pink"];
const shapes = ["circle","square","triangle"];

// 30 ta takrorlanmas aralash savol
const questions = [];
const usedTexts = new Set();

while(questions.length<30){
  const typeRand = Math.random();
  let type, text, correct, shape;

  if(typeRand<0.5){ // vizual
    type = "visual";
    correct = Math.floor(Math.random()*7)+1; // 1-7 ob‚Äôekt
    shape = shapes[questions.length % shapes.length];
    text = `Necha ${shape} bor?`;
  } else if(typeRand<0.7){ // arifmetika
    type = "math";
    const a = Math.floor(Math.random()*7)+1;
    const b = Math.floor(Math.random()*7)+1;
    correct = a+b;
    text = `${a} + ${b} = ?`;
  } else if(typeRand<0.85){ // ketma-ketlik
    type = "sequence";
    const start = Math.floor(Math.random()*5)+1;
    correct = start+2;
    text = `${start}, ${start+1}, ?`;
  } else { // taqqoslash / mantiq
    type = "compare";
    const a = Math.floor(Math.random()*7)+1;
    const b = Math.floor(Math.random()*7)+1;
    correct = a>b ? a : b;
    text = `Qaysi raqam katta: ${a} yoki ${b}?`;
  }

  if(!usedTexts.has(text)){
    usedTexts.add(text);
    questions.push({type, text, c: correct, shape});
  }
}

// Ball va indeks
let score = 0;
let index = 0;

function createItem(shape){
  const div = document.createElement("div");
  const color = colors[Math.floor(Math.random()*colors.length)];

  if(shape==="circle"){
    div.style.width="50px";
    div.style.height="50px";
    div.style.backgroundColor=color;
    div.style.borderRadius="50%";
  } else if(shape==="square"){
    div.style.width="50px";
    div.style.height="50px";
    div.style.backgroundColor=color;
    div.style.borderRadius="0";
  } else if(shape==="triangle"){
    div.style.width="0";
    div.style.height="0";
    div.style.backgroundColor="transparent";
    div.style.borderLeft="25px solid transparent";
    div.style.borderRight="25px solid transparent";
    div.style.borderBottom=`50px solid ${color}`;
  }

  div.classList.add("item");
  return div;
}

function getAnswers(correct){
  let answers = [correct];
  while(answers.length<3){
    let w = correct + Math.floor(Math.random()*3)-1;
    if(w<0) w=0;
    if(!answers.includes(w)) answers.push(w);
  }
  return answers.sort(()=>Math.random()-0.5);
}

function showQuestion(){
  if(index>=questions.length){
    document.body.innerHTML=`<h1>üéâ Tugadi!</h1><h2>Ball: ${score}/${questions.length}</h2>`;
    return;
  }

  const q = questions[index];
  const container = document.getElementById("question");
  const answerDiv = document.getElementById("answers");
  container.innerHTML = "";
  answerDiv.innerHTML = "";

  let answersArr = [];

  if(q.type==="visual"){
    container.innerHTML = `<p>${q.text}</p>`;
    const itemContainer = document.createElement("div");
    for(let i=0;i<q.c;i++){
      itemContainer.appendChild(createItem(q.shape));
    }
    container.appendChild(itemContainer);
    answersArr = getAnswers(q.c);
  } else if(q.type==="math" || q.type==="sequence" || q.type==="compare"){
    container.innerText = q.text;
    answersArr = getAnswers(q.c);
  }

  answersArr.forEach(a=>{
    const btn = document.createElement("a");
    btn.href="#";
    btn.className="answer-btn";
    btn.innerText=a;
    btn.onclick=()=>check(a);
    answerDiv.appendChild(btn);
  });
}

function check(a){
  const correct = questions[index].c;
  if(a===correct){
    score++;
    document.getElementById("result").innerText="üéâ To‚Äòg‚Äòri!";
  } else {
    document.getElementById("result").innerText=`‚ùå Xato, to‚Äòg‚Äòri javob: ${correct}`;
  }
  document.getElementById("score").innerText=score;
  index++;
  setTimeout(()=>{
    document.getElementById("result").innerText="";
    showQuestion();
  },800);
}

// Boshlash
showQuestion();
</script>
<a href="index.html">Ortga qaytish</a>
</body>
</html>
